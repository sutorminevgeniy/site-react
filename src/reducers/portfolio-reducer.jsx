
const portfolio = [
  {
    dataId: 'id-1',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min1.jpg'
    }
  },
  {
    dataId: 'id-2',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min2.jpg'
    }
  },
  {
    dataId: 'id-3',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min3.jpg'
    }
  },
  {
    dataId: 'id-4',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min4.jpg'
    }
  },
  {
    dataId: 'id-5',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min5.jpg'
    }
  },
  {
    dataId: 'id-6',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min6.jpg'
    }
  },
  {
    dataId: 'id-7',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min7.jpg'
    }
  },
  {
    dataId: 'id-8',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min8.jpg'
    }
  },
  {
    dataId: 'id-9',
    tag: 'Mark Sebastian',
    image: {
      src: './img/sample/portfolio-min9.jpg'
    }
  },
  {
    dataId: 'id-10',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min10.jpg'
    }
  },
  {
    dataId: 'id-11',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min11.jpg'
    }
  },
  {
    dataId: 'id-12',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min12.jpg'
    }
  },
  {
    dataId: 'id-13',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min13.jpg'
    }
  },
  {
    dataId: 'id-14',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min14.jpg'
    }
  },
  {
    dataId: 'id-15',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min15.jpg'
    }
  },
  {
    dataId: 'id-16',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min16.jpg'
    }
  },
  {
    dataId: 'id-17',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min17.jpg'
    }
  },
  {
    dataId: 'id-18',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min18.jpg'
    }
  },
  {
    dataId: 'id-19',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min19.jpg'
    }
  },
  {
    dataId: 'id-20',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min20.jpg'
    }
  },
  {
    dataId: 'id-21',
    tag: 'Other cars',
    image: {
      src: './img/sample/portfolio-min1.jpg'
    }
  },
  {
    dataId: 'id-22',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min2.jpg'
    }
  },
  {
    dataId: 'id-23',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min3.jpg'
    }
  },
  {
    dataId: 'id-24',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min4.jpg'
    }
  },
  {
    dataId: 'id-25',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min5.jpg'
    }
  },
  {
    dataId: 'id-26',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min6.jpg'
    }
  },
  {
    dataId: 'id-27',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min7.jpg'
    }
  },
  {
    dataId: 'id-28',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min8.jpg'
    }
  },
  {
    dataId: 'id-29',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min9.jpg'
    }
  },
  {
    dataId: 'id-30',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min10.jpg'
    }
  },
  {
    dataId: 'id-31',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min11.jpg'
    }
  },
  {
    dataId: 'id-32',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min12.jpg'
    }
  },
  {
    dataId: 'id-33',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min13.jpg'
    }
  },
  {
    dataId: 'id-34',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min14.jpg'
    }
  },
  {
    dataId: 'id-35',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min15.jpg'
    }
  },
  {
    dataId: 'id-36',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min16.jpg'
    }
  },
  {
    dataId: 'id-37',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min17.jpg'
    }
  },
  {
    dataId: 'id-38',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min18.jpg'
    }
  },
  {
    dataId: 'id-39',
    tag: 'Monty Python',
    image: {
      src: './img/sample/portfolio-min19.jpg'
    }
  },
  {
    dataId: 'id-40',
    tag: 'Ford Mustang',
    image: {
      src: './img/sample/portfolio-min20.jpg'
    }
  }
];

let portfolioByTag = portfolio;

let initialState = {
  page: 1,
  countProjects: 10,
  tag: 'All',
  portfolio: portfolioByTag
};

initialState.portfolio = portfolioByTag.slice(0, initialState.countProjects);

const getTags = function () {
  let result = {};

  result.All = portfolio.length;

  portfolio.map((item) => {
    if(item.tag in result) {
      result[item.tag]++;
    } else {
      result[item.tag] = 1;
    }
  });

  return result;
}

initialState.tags = getTags();

const portfolioReducer = function(state = initialState, action) {
  let newState = Object.assign({}, state);

  switch(action.type) {
    case 'GET_PROJECTS_BY_TAG':
      if(action.tag === 'All'){
        portfolioByTag = portfolio;
      } else {
        portfolioByTag = portfolio.filter(function(item) {
          return (item.tag === action.tag);
        });
      }

      newState.page = 1;
      newState.tag =action.tag;
      newState.portfolio = portfolioByTag.slice(0, newState.countProjects);

      return newState;

    case 'NEXT_PAGE':
      let startProject;

      newState.page = state.page;

      if(newState.page < Math.ceil(portfolioByTag.length / newState.countProjects)){
        newState.page++;
      } else {
        newState.page = 1;
      }

      startProject = (newState.page - 1) * newState.countProjects
      newState.portfolio = portfolioByTag.slice(startProject , startProject + newState.countProjects);

      return newState;

    case 'PREV_PAGE':
      newState.page = state.page;

      if(newState.page > 1){
        newState.page--;
      } else {
        newState.page = Math.ceil(portfolioByTag.length / newState.countProjects);
      }
      
      startProject = (newState.page - 1) * newState.countProjects
      newState.portfolio = portfolioByTag.slice(startProject , startProject + newState.countProjects);

      return newState;
  }

  return state;
}

export default portfolioReducer;